<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Security Terminal</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Login Overlay with Effects -->
    <div id="login-overlay" class="login-overlay">
        <div class="screen-overlay"></div> <!-- Overlay for fuzzy CRT effect -->
        <div class="login-container">
            <h2>Login</h2>
            <input type="text" id="username" placeholder="Username" autocomplete="off">
            <input type="password" id="password" placeholder="Password" autocomplete="off">
            <button id="login-btn">Login</button>
            <p id="login-error" class="error-message-login" style="color: red; display: none;">Invalid login. Please try again.</p>
        </div>
    </div>

    <!-- Terminal Page (hidden initially) -->
    <div class="terminal" id="terminal" style="display: none;">
        <h1>Forensics Submission Terminal</h1>
        <div class="screen-overlay"></div>

        <!-- Form Fields -->
        <label>Case Number:</label>
        <input type="text" id="caseNumber" autocomplete="off" oninput="clearError(this)" onfocus="clearUploadingMessage()"><br>
        <span class="error-message" id="caseNumberError" style="display: none;">This field is required.</span><br>

        <label>Footprint ID:</label>
        <input type="text" id="footprint" autocomplete="off" oninput="clearError(this)" onfocus="clearUploadingMessage()"><br>
        <span class="error-message" id="footprintError" style="display: none;">This field is required.</span><br>

        <label>DNA Sample Code:</label>
        <input type="text" id="dnaSample" autocomplete="off" oninput="clearError(this)" onfocus="clearUploadingMessage()"><br>
        <span class="error-message" id="dnaSampleError" style="display: none;">This field is required.</span><br>

        <label>Handwriting Analysis:</label>
        <input type="text" id="handwriting" autocomplete="off" oninput="clearError(this)" onfocus="clearUploadingMessage()"><br>
        <span class="error-message" id="handwritingError" style="display: none;">This field is required.</span><br>

        <label>Witnesses Present:</label>
        <div class="witness-container">
            <input type="radio" id="witnessYes" name="witness" value="yes"> Yes
            <input type="radio" id="witnessNo" name="witness" value="no" > No
        </div>
        <span class="error-message" id="witnessError" style="display: none;">This field is required.</span><br>

        <label>Audio Analysis File (Drag and Drop):</label>
        <div id="audioFileDropZone" class="drop-zone">
            Drop file here or click to upload
        </div>
        <input type="file" id="audioFileInput" style="display: none;" accept=".mp3">
        <span class="error-message" id="audioFileError" style="display: none;">This field is required.</span><br>

        <button onclick="submitData()">Submit Evidence</button>
        <p id="response"></p>
        <div class="warning-message" id="warningMessage" style="display: none;">Check highlighted submission(s)</div>
    </div>

    <script>
        const loginOverlay = document.getElementById('login-overlay');
        const loginError = document.getElementById('login-error');
        const terminal = document.getElementById('terminal');
        const loginButton = document.getElementById('login-btn');
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');

        const correctUsername = 'COFramesly';
        const correctPassword = '1234';

        loginButton.addEventListener('click', function() {
            if (usernameInput.value === correctUsername && passwordInput.value === correctPassword) {
                loginOverlay.style.display = 'none';
                terminal.style.display = 'flex';
            } else {
                loginError.style.display = 'block';
            }
        });

        // Drag and Drop Logic for the Audio File
        const audioFileDropZone = document.getElementById('audioFileDropZone');
        const audioFileInput = document.getElementById('audioFileInput');
        const audioFileError = document.getElementById('audioFileError');

        audioFileDropZone.addEventListener('click', () => {
            audioFileInput.click();
        });

        audioFileDropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            audioFileDropZone.classList.add('dragover');
        });

        audioFileDropZone.addEventListener('dragleave', () => {
            audioFileDropZone.classList.remove('dragover');
        });

        audioFileDropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            const file = e.dataTransfer.files[0];
            audioFileInput.files = e.dataTransfer.files;
            audioFileDropZone.textContent = file.name;
            audioFileDropZone.classList.remove('dragover');
        });

        // Define submitData function
        function submitData() {
            // Display the "Forensics information updating..." message
            document.getElementById('response').textContent = 'Forensics information updating...';
            document.getElementById('response').style.display = 'block'; // Make sure itâ€™s visible

            // Simulate a brief delay (for example, 2 seconds) before validating
            setTimeout(() => {
                const caseNumber = document.getElementById('caseNumber').value;
                const footprint = document.getElementById('footprint').value;
                const dnaSample = document.getElementById('dnaSample').value;
                const handwriting = document.getElementById('handwriting').value;
                const witnessYes = document.getElementById('witnessYes').checked;
                const witnessNo = document.getElementById('witnessNo').checked;
                const audioFile = audioFileInput.files[0];

                let isValid = true;

                // Clear previous error states
                clearErrors();
                document.getElementById('warningMessage').style.display = 'none';  // Hide the big warning message initially

                // Validate Case Number (should match the format: 25STH)
                if (!caseNumber || !/^\d{2}[A-Za-z]{3}$/.test(caseNumber)) {  // e.g., 25STH
                    document.getElementById('caseNumber').classList.add('error-border');
                    isValid = false;
                }

                // Validate Footprint ID (should match the format: FP123)
                if (!footprint || !/^FP\d{3}$/.test(footprint)) {  // e.g., FP123
                    document.getElementById('footprint').classList.add('error-border');
                    isValid = false;
                }

                // Validate DNA Sample Code (should match the format: DNA456)
                if (!dnaSample || !/^DNA\d{3}$/.test(dnaSample)) {  // e.g., DNA456
                    document.getElementById('dnaSample').classList.add('error-border');
                    isValid = false;
                }

                // Validate Handwriting (should match the format: HW789)
                if (!handwriting || !/^HW\d{3}$/.test(handwriting)) {  // e.g., HW789
                    document.getElementById('handwriting').classList.add('error-border');
                    isValid = false;
                }

                   // Validate Audio File (should be named Suspect_voice00.mp3)
        if (!audioFile) {
            document.getElementById('audioFileError').style.display = 'inline';  // Show "This field is required"
            document.getElementById('audioFileDropZone').classList.add('error-border-audio');
            isValid = false;
        } else if (!/^Suspect_voice00\.mp3$/.test(audioFile.name)) {  // Only accept Suspect_voice00.mp3
            document.getElementById('audioFileDropZone').classList.add('error-border-audio');
            isValid = false;
        }

                // Validate Witness selection
                if (!(witnessYes || witnessNo)) {
                    document.getElementById('witnessError').style.display = 'inline';
                    isValid = false;
                }

                // If validation failed, show the warning message and make it flash for 3 seconds
                if (!isValid) {
                    const warningMessage = document.getElementById('warningMessage');
                    warningMessage.style.display = 'block';
                    setTimeout(() => {
                        warningMessage.style.display = 'none';  // Hide after 3 seconds
                    }, 3000);

                    // Set the response message as an error message
                    document.getElementById('response').textContent = 'Please fill out all required fields correctly.';
                    document.getElementById('response').classList.remove('success');
                    document.getElementById('response').classList.add('error');
                } else {
                    // All fields are valid, process the data (show success message)
                    document.getElementById('response').textContent = 'Evidence submitted successfully!';
                    document.getElementById('response').classList.remove('error');
                    document.getElementById('response').classList.add('success');
                }
            }, 2000);  // Wait 2 seconds before performing validation
        }

        // Clear error messages and reset borders
        function clearErrors() {
            document.getElementById('caseNumberError').style.display = 'none';
            document.getElementById('footprintError').style.display = 'none';
            document.getElementById('dnaSampleError').style.display = 'none';
            document.getElementById('handwritingError').style.display = 'none';
            document.getElementById('witnessError').style.display = 'none';
            document.getElementById('audioFileError').style.display = 'none';  // Hide the error message

            document.getElementById('caseNumber').classList.remove('error-border');
            document.getElementById('footprint').classList.remove('error-border');
            document.getElementById('dnaSample').classList.remove('error-border');
            document.getElementById('handwriting').classList.remove('error-border');
            document.getElementById('audioFileDropZone').classList.remove('error-border');
        }
    </script>
</body>
</html>
